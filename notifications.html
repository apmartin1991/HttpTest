<!DOCTYPE html>
<html>

    <body>

        <h1>Cams Test</h1>

        <button onClick=viewLive()>View Live</button>
        <br/>
        <br/>
        <button onClick=viewArchive()>View Archive</button>

        <script>

            function auth(token) {
                if (token == "1234") {
                    alert("Authenticated");
                }
                else {
                    alert("Not authenticated!");
                }
            }

            function requestAuth() {
                console.log("Auth initiated...waiting on client to call auth with token");
                var platform = getPlatform();
                if (platform == "win") {
                    return window.chrome.webview.hostObjects.sync.bridge.Auth();
                }
                else if (platform == "ios") {
                    window.webkit.messageHandlers.Auth.postMessage();
                }
                else if (platform == "android") {
                    return AndroidBridge.Auth();
                }
            }

            window.onload = requestAuth();

            function getPlatform() {
                var urlParams = new URLSearchParams(window.location.search);
                return urlParams.get('platform');
            }

            function viewLive() {
                console.log("View Live");
                var platform = getPlatform();
                var payload = "s=055dd549-075d-44dd-ab91-6c98c3f2cccb&e=fe880e14-6da0-4cd8-bbc8-92e240747c27";
                if (platform == "win") {
                    return window.chrome.webview.hostObjects.sync.bridge.ViewLive(payload);
                }
                else if (platform == "ios") {
                    window.webkit.messageHandlers.ViewLive.postMessage(payload);
                }
                else if (platform == "android") {
                    return AndroidBridge.ViewLive(payload);
                }
            }

            function viewArchive() {
                console.log("View Archive");
                var urlParams = new URLSearchParams(window.location.search);
                var platform = urlParams.get('platform');
                var payload = "s=055dd549-075d-44dd-ab91-6c98c3f2cccb&e=fe880e14-6da0-4cd8-bbc8-92e240747c27&t=1616678602000";
                if (platform == "win") {
                    return window.chrome.webview.hostObjects.sync.bridge.ViewArchive(payload);
                }
                else if (platform == "ios") {
                    window.webkit.messageHandlers.ViewLive.postMessage(payload);
                }
                else if (platform == "android") {
                    return AndroidBridge.ViewArchive(payload);
                }
            }
        </script>

    </body>

</html>